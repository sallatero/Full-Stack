(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){e.exports=n(322)},321:function(e,t,n){},322:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(36),l=n.n(r),c=n(162),i=n(38),u=n(334),s=n(335),m=n(332),d=n(333),f=function(e){return o.a.createElement(m.a.Row,null,o.a.createElement(m.a.Cell,null,e.person.name),o.a.createElement(m.a.Cell,null,e.person.number),o.a.createElement(m.a.Cell,null,o.a.createElement(d.a,{compact:!0,floated:"right",onClick:e.remove},"Poista")))},p=function(e){console.log("Numerot alussa: ",e.persons),console.log("Search: ",e.search);var t=new RegExp(e.search,"i");console.log("reg: ",t);var n=e.persons.filter(function(e){return t.test(e.name)});return console.log("filtered: ",n),o.a.createElement(u.a,{fluid:!0,inverted:!0,color:"violet",textAlign:"center",padded:"very"},o.a.createElement(s.a,{as:"h3"},"Numerot"),o.a.createElement(m.a,{inverted:!0,color:"violet",columns:"3",collapsing:!0,fluid:!0,textAlign:"center"},o.a.createElement(m.a.Body,null,n.map(function(t){return o.a.createElement(f,{key:t.id,person:t,remove:function(){return e.removeId(t.id)}})}))))},E=n(331),g=n(19),h=function(e){return o.a.createElement(E.a,{onSubmit:e.handleSubmit},o.a.createElement(s.a,{as:"h3"},"Lis\xe4\xe4 uusi"),o.a.createElement(E.a.Group,{widths:"equal"},o.a.createElement(g.a,{control:"input",placeholder:"Etunimi ja sukunimi",fluid:"true",type:"text",value:e.newName,onChange:e.changeName}),o.a.createElement(g.a,{control:"input",placeholder:"Puhelinnumero",fluid:"true",type:"text",value:e.newNro,onChange:e.changeNro})),o.a.createElement(d.a,{fluid:!0,type:"submit"},"Tallenna"))},b=function(e){return o.a.createElement(E.a,null,o.a.createElement(g.a,{fluid:"true"},o.a.createElement(s.a,{as:"h3"},"Rajaa nimi\xe4"),o.a.createElement("input",{type:"text",placeholder:"Kirjoita nimen alku",value:e.search,onChange:e.handler})))},v=n(56),j=n.n(v),w="/api/persons",y=function(){return j.a.get(w).then(function(e){return e.data})},C=function(e){return j.a.post(w,e).then(function(e){return e.data})},O=function(e,t){return j.a.put("".concat(w,"/").concat(e),t).then(function(e){return e.data})},N=function(e){return j.a.delete("".concat(w,"/").concat(e)).then(function(e){return e.data})},S=function(e){var t=e.message,n=e.err;return""===t?null:o.a.createElement("div",{style:n?{margin:15,color:"red",fontSize:20,border:"solid",borderWidth:3,borderRadius:10,backgroundColor:"#D0D0D0",borderColor:"red",padding:10}:{margin:15,color:"green",fontSize:20,border:"solid",borderWidth:3,borderRadius:10,backgroundColor:"#D0D0D0",borderColor:"green",padding:10}},t)},k=n(330),T=n(336),L=(n(321),function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(""),m=Object(i.a)(l,2),d=m[0],f=m[1],E=Object(a.useState)(""),g=Object(i.a)(E,2),v=g[0],j=g[1],w=Object(a.useState)(""),L=Object(i.a)(w,2),x=L[0],A=L[1],R=Object(a.useState)(""),D=Object(i.a)(R,2),P=D[0],I=D[1],K=Object(a.useState)(!1),z=Object(i.a)(K,2),B=z[0],F=z[1];Object(a.useEffect)(function(){console.log("effect"),y().then(function(e){console.log("promise fulfilled"),r(e)})},[]),console.log("render",n.length,"persons");var J=function(){f(""),j("")};return o.a.createElement(k.a,{fluid:!0},o.a.createElement(u.a,{inverted:!0,color:"violet",textAlign:"center",padded:"very"},o.a.createElement(s.a,{as:"h1"},"PUHELINLUETTELO"),o.a.createElement(k.a,{text:!0},o.a.createElement(T.a,null,o.a.createElement(T.a.Row,null,o.a.createElement(T.a.Column,null,o.a.createElement(S,{message:P,err:B}))),o.a.createElement(T.a.Row,null,o.a.createElement(T.a.Column,null,o.a.createElement(b,{search:x,handler:function(e){A(e.target.value)}}))),o.a.createElement(T.a.Row,null,o.a.createElement(T.a.Column,null,o.a.createElement(h,{handleSubmit:function(e){if(e.preventDefault(),console.log("handleSubmitiss\xe4"),void 0===n.find(function(e){return 0===d.localeCompare(e.name,void 0,{sensitivity:"base"})}))C({name:d,number:v}).then(function(e){console.log("uusi nimi lis\xe4ttiin"),r(n.concat(e)),I("Lis\xe4ttiin ".concat(e.name)),F(!1),setTimeout(function(){I("")},5e3)}).catch(function(e){console.log("Frontendist\xe4"),console.log("Frontendist\xe4: ",e.response.data),I("Lis\xe4ys ei onnistunut: ".concat(e.response.data.error)),F(!0),setTimeout(function(){I("")},5e3)});else if(console.log("Nimi on jo."),window.confirm("".concat(d," on jo luettelossa. Korvataanko vanha numero uudella?"))){var t=n.find(function(e){return e.name===d}),a=Object(c.a)({},t,{number:v});O(t.id,a).then(function(e){r(n.map(function(n){return n.id!==t.id?n:e})),I("K\xe4ytt\xe4j\xe4n ".concat(d," numero p\xe4ivitettiin")),F(!1),setTimeout(function(){I("")},5e3)}).catch(function(e){I("K\xe4ytt\xe4j\xe4 ".concat(d," oli jo poistettu.")),F(!0),setTimeout(function(){I("")},5e3),y().then(function(e){console.log("LADATAAN PALVELIMELTA"),r(e)})})}J()},newName:d,newNro:v,changeName:function(e){f(e.target.value)},changeNro:function(e){j(e.target.value)}}))),o.a.createElement(T.a.Row,null,o.a.createElement(T.a.Column,null,o.a.createElement(p,{persons:n,search:x,removeId:function(e){console.log("tyyppi\xe4 jonka id on ".concat(e," halutaan poistaa"));var t=n.filter(function(t){return t.id===e})[0].name;window.confirm("Poistetaanko ".concat(t,"?"))?N(e).then(function(a){console.log(a),r(n.filter(function(t){return t.id!==e})),I("Poistettiin ".concat(t)),F(!1),setTimeout(function(){I("")},5e3)}).catch(function(e){I("K\xe4ytt\xe4j\xe4 ".concat(d," oli jo poistettu.")),F(!0),setTimeout(function(){I("")},5e3)}):console.log("peruutettiin")}})))))))});l.a.render(o.a.createElement(L,null),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.92b56ba0.chunk.js.map